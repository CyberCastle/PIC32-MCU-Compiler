version: v1.0
name: Initial Pipeline
agent:
  machine:
    type: a1-standard-4
    os_image: macos-mojave-xcode11
execution_time_limit:
  hours: 12
blocks:
  - name: 'Block #1'
    task:
      jobs:
        - name: 'Job #1'
          commands:
            - xcversion select 11.3.1
            - checkout
            - ./compiler-build.sh
      epilogue:
        on_pass:
          commands:
            - artifact push project PIC32-MCU-Compiler/zips/pic32-tools-Compiler-2.40-Darwin-image.tar.gz
            - artifact push project PIC32-MCU-Compiler/zips/pic32-tools-Compiler-2.40-Darwin-image.sha256
        on_fail:
          commands:
            - artifact push job --expire-in 2w PIC32-MCU-Compiler/Compiler-2.40.log
